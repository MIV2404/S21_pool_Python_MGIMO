# Охота на API


## Contents

1. [Chapter I](#chapter-i) \
    1.1. [Introduction](#introduction)
2. [Chapter II](#chapter-ii) \
    2.1. [Information](#information)
3. [Chapter III](#chapter-iii) \
    3.1. [API](#api) \
    3.2. [Сторонние API](#сторонние-api) \
    3.3. [VK API](#vk-api) \
    3.4. [Конфиг-файлы](#конфиг-файлы) \
    3.5. [Task 1](#task-1) \
    3.6. [Task 2](#task-2) \
    3.7. [Task 3](#task-3) \
    3.8. [Task 4](#task-4)



## Chapter I

### Introduction

Привет, студент!
Сегодня будет очень непростой, но очень интересный день! А всё потому, что сегодня мы с тобой познакомимся с таким понятием, как API. 

## Chapter II

### Information

Хотим напомнить тебе, что наше обучение строится по принципу "равный равному" (P2P, peer-to-peer). P2P – это способ обучения, когда студенты помогают друг другу при возникновении каких-либо сложностей. Если ты столкнулся с чем-то непонятным, первым делом спроси у своих товарищей по курсу. Если ответа ты не получил, то обратись к Google. А получив ответ на свой вопрос, не забудь поделиться им с другими студентами! 


## Chapter III

### API

API (англ. Application Programming Interface) в переводе с английского – программный интерфейс приложения. Не очень понятно, да?

Давай разбираться!

Самое первое, что нам нужно понять – что же такое интерфейс. В Интернете можно найти кучу непонятных определений, но на самом деле тут нет ничего сложного. В переводе с английского интерфейс – это в буквальном смысле “место соприкосновения” или “точка соприкосновения двух объектов”.

Например, всем знакомый UI (User Interface) – это место соприкосновения компьютера с пользователем. API, по-простому, – это место соприкосновения двух программ. 

Предположим, вы разрабатываете какое-то приложение и вам нужно, чтобы в какой-то момент пользователю показывался прогноз погоды. Но вы же не будете сами реализовывать всю логику для расчета погоды. Программы с таким функционалом уже существуют, и вам просто нужно получить от них эту информацию. Тут нам на помощь приходит API. Ваше приложение должно использовать API сервиса погоды для получения необходимых данных, не зная при этом, как выполняются вычисления погоды, нам это знать совсем не обязательно. Но как же нам понять, как обращаться к программе погоды? У API должна быть документация, в которой описаны все его элементы и способы взаимодействия с ними. 

Чаще всего API интерпретируют как договор между двумя сторонами (программами), в котором как раз и прописывается, как к программе можно обращаться, что она может сделать и так далее. По сути, API – это набор функций, которые может выполнять программа. 

Надеюсь, стало немного понятнее, для чего вообще нужен API.

### Сторонние API

Сторонние API – это API, предоставляемые третьими лицами (например, такими компаниями, как Facebook или Google), чтобы мы могли получить доступ к их функциям и использовать их для нашего сайта или приложения. 

Самым очевидным примером является использование API гугл карт для создания пользовательских карт в своих приложениях и сайтах.
В примере, который мы разбирали с тобой выше, про отображение прогноза погоды в своем приложении, мы также использовали бы сторонний API сервиса погоды.


### VK API

VK.com предоставляет многофункциональный API, который очень удобен в использовании. API позволяет отправлять сообщения, публиковать записи на стене, производить любые действия, которые существуют в VK.
Разобравшись с VK API, вы с легкостью сможете пользоваться API других сайтов и приложений. 

Посмотреть полный список методов, через которые можно взаимодействовать с VK API можно посмотреть по ссылке: https://vk.com/dev/methods.

Для работы с VK API в Python существует модуль vk. Его установка осуществляется точно так же, как и у всех других модулей – через pip:
```
pip install vk
```
Подробнее с этим модулем мы познакомимся в задачах этого дня, а пока можешь самостоятельно почитать об основных функциях и особенностях.

### Конфиг-файлы

Конфиг-файлы (или файлы конфигурации) — это, по сути, файлы, которые содержат информацию, необходимую для успешной работы программы, которые структурированы особым образом.

Наиболее распространенные форматы конфиг-файлов – это форматы json и yaml.

С форматом JSON мы с тобой уже знакомы, но просто напомню, что JSON строится из набора пар “имя-значение” и очень похож на словарь. 
Для работы с JSON-форматом в Python тебе понадобится пакет JSON. Всё просто!

А вот теперь давай разберемся с форматом YAML.
Он считается одним из наиболее популярных форматов для файлов конфигураций и представляет собой расширенную версию JSON. 
Это легкочитаемый файловый формат, состоящий из пар “ключ-значение”. Сохранить YAML-файл можно с расширениями .yaml или .yml. Этот формат охотнее используется по сравнению с JSON-форматом, так как YAML более компактен и удобен. Для сравнения посмотри на один и тот же код в разных форматах:

YAML:
```
apis:
  - name: login
    port: 8080
  - name: profile
    port: 8090
```

JSON:
```
{
    "apis": [
        {
            "name": "login"
            "port": 8080
        },
        {
            "name": "profile"
            "port": 8090
        }
    ]
}
```

Для работы с YAML в Python используется модуль PyYAML. Он не входит в стандартную библиотеку модулей, поэтому его нужно установить:
```
pip install pyyaml
```
Работа с ним аналогична модулю JSON.
Подробнее о формате и его синтаксисе ты можешь узнать в Интернете. 

А теперь давай перейдем к заданиям!

### Task 1

Прежде чем ты сможешь отправлять запросы с помощью API, тебе необходимо зарегистрироваться для получения ключа API или воспользоваться другими способами аутентификации. Многие API требуют тщательной авторизации из-за необходимости защиты конфиденциальных данных, подтверждения личности и обеспечения безопасности данных приложения.

В целом, авторизация в API служит следующим целям:
- отслеживание, кто делает запросы
- отслеживание использования API
- блокировка или приостановка пользователей, превышающих количество запросов
- применение разных уровней разрешений для разных пользователей

Существуют разные виды авторизации. Мы рассмотрим наиболее часто применяемые из них:
- API ключ
- Basic Auth
- OAuth 2.0

Мы кратко остановимся на каждом из них, а если тебе нужна более подробная информация, ты знаешь куда обращаться.😉

Итак, начнем с **API ключа**.

Большинство API требуют авторизацию с помощью ключа API для дальнейшего использования API. Такой ключ представляет собой длинную строку, которую обычно включают в URL запросы. 

**Basic Auth**

С помощью этого метода отправитель помещает пару `имя пользователя:пароль` в заголовок запроса. Имя пользователя и пароль кодируются с помощью специального метода кодирования, который преобразует имя пользователя и пароль в набор из 64 символов для обеспечения безопасной передачи.

**OAuth 2.0** является примером авторизации через сторонние сервисы. В таком подходе пользователю предлагается войти в систему при помощи сторонних сервисов, например, таких как Google или Facebook.
Давай перейдем непосредственно к заданию!

Для выполнения следующих заданий тебе понадобится access_token. Информация по получению токена находится в директории `materials/README.md`.

Вот простой пример авторизации:
```
import vk
session = vk.Session(access_token='{токен авторизации}')
api = vk.API(session)
```
После этого у объекта api ты сможешь вызывать все методы, перечисленные на этой странице - https://vk.com/dev/methods.

Теперь мы готовы перейти к твоему первому заданию!

Тебе нужно написать функцию, которая читает файл и возвращает прочитанный из файла токен. А также есть небольшое дополнительное задание, также прописанное в файле для первого задания — `materials/vk_api/auth.py`.

Результаты сохрани в папке `src`.


### Task 2

Твое следующее задание – написать функцию, которая получит и выведет на экран информацию о пользователе (фио, дата рождения, место жительства и т.д.)

Файл с заданием находится в директории `materials/vk_api/account_info.py`.

Результаты сохрани в папке `src`.

### Task 3

Теперь нужно написать функцию, которая получит и выведет на экран сведения о подписках пользователя, список его групп, друзей и прочее. Более подробная информация находится в файле с заданием, который расположен в директории `materials/vk_api/account_extra_info.py`.

Результаты сохрани в папке `src`.

### Task 4
А вот и последнее задание на сегодня!

До этого мы с тобой использовали только get-запросы на получение какой-либо информации. Давай попробуем также поработать с post-запросами!

Тебе нужно опубликовать пост на своей странице. А как это сделать написано в `materials/vk_api/durov_return_wall.py`.

Результаты сохрани в папке `src`.

>Пожалуйста, оставьте обратную связь по проекту в [форме обратной связи.](https://forms.gle/QvJuc6Zic1NLpLo97)
